(set #gamedir "RiseOfTheRobots")

;; Install script generated by InstallWizard 1.5
;; InstallWizard is copyright 1999 Jean-François Fabre

;try to figure out a place where the user usually installs his games
(if (exists "Games:" (noreq) )
    (set @default-dest "Games:")
    (if (exists "SYS:Games" (noreq) )
        (set @default-dest "SYS:Games")
        (if (exists "Work:Games" (noreq) )
            (set @default-dest "Work:Games")
            (if (exists "JEUX:" (noreq) )
               (set @default-dest "JEUX:")
               (set @default-dest "SYS:")
            )
        )
    )
)

;---------------------------------------------------------------------
; Which version does the user want to install? This routine doesn't need
; to be changed UNLESS there are multiple versions.

(procedure P_SelectVersion
    (
      (set #version
        (askchoice
          (prompt ("Which version of %s would you like to install?" @app-name))
          (default 0)
          (choices "ECS" "AGA")
          (help @askchoice-help)
        )
      )

      ; Certain versions may use different slaves, so set that up here if
      ; required. It will change the install directory and the slaves used.
      ; 
      (select #version
         (set #version_suffix "ECS")		;Tack on AGA to the slave name(s)
        (set #version_suffix "AGA")		;Tack on CD32 to the slave name(s)
      )

      (set #prefix ("%s%s" #prefix #version_suffix))
    )

)


;ask the user to select a directory where the game is

(P_SelectVersion)

(set default-dest
     (askdir (prompt "Where is " @app-name " " #version_suffix " located?\n")
                     (help @askdir-help)
                     (default @default-dest)
                     (newpath)
             )
)

(set @default-dest default-dest)

(set #datadir (tackon @default-dest "data"))

(if (exists (tackon #datadir "rise"))
("")
(
; create that dir and move all files into that directory
(makedir
	(help @makedir-help)
    #datadir
)
(message ("rename %s %s" (tackon @default-dest "~(data)") #datadir))
(run ("rename %s %s" (tackon @default-dest "~(data)") #datadir))
)
)
(copyfiles
	(help @copyfiles-help)
	(source "readme")
	(dest @default-dest)
	(infos)
)

(copyfiles
	(help @copyfiles-help)
	(source ("RiseOfTheRobots%s.slave" #version_suffix))
	(dest @default-dest)
)

;  (set #icon
;    (askchoice
;      (prompt "\nWhich icon do you like to install ?\n")
;      (default 0)
;      (choices "Newicon" "Exoticon")
;      (help @askchoice-help)
;    )
;   )

;(select #icon
;  (set #icon ("%s.newicon" #gamedir))
  (set #icon ("%s.exoticon" #gamedir))
;)
(copyfiles
  (help @copyfiles-help)
  (source #icon)
  (newname ("%s.info" #gamedir))
  (dest @default-dest)
)
