;; Install script generated by InstallWizard 1.6c
;; InstallWizard is copyright 2001 Jean-François Fabre


;try to figure out a place where the user usually installs his games
(if (exists "Games:" (noreq) )
    (set @default-dest "Games:")
    (if (exists "SYS:Games" (noreq) )
        (set @default-dest "SYS:Games")
        (if (exists "Work:Games" (noreq) )
            (set @default-dest "Work:Games")
            (if (exists "JEUX:" (noreq) )
               (set @default-dest "JEUX:")
               (set @default-dest "SYS:")
            )
        )
    )
)

(set #game_ver
	(askchoice
		(prompt "Which game do you want to install")
		(help	@askoptions-help)
		(choices
		   "Moktar"
		   "Titus The Fox"
		)
	)
)

(if (= 0 #game_ver)
 (
   (set @app-name "Moktar")
   (set #currentdisk "Zou_zou_zou_zou_zou_zoubidaaa"))
  (
   (set @app-name "TitusTheFox")
   (set #currentdisk "Fox")
  )
)

(set #dest
     (tackon (askdir (prompt "Where would you like " @app-name " installed?\n"
                             "A drawer called " @app-name " will be created.")
                     (help @askdir-help)
                     (default @default-dest)
                     (newpath)
             )
     @app-name
     )
)


(set @default-dest #dest)



(makedir @default-dest
	(help @makedir-help)
	(infos)
)
(set #datadir (tackon @default-dest "data"))

(makedir #datadir
	(help @makedir-help)
)

(copyfiles
	(help @copyfiles-help)
	(source "readme")
	(dest @default-dest)
	(infos)
)

(set #diskno 49)

(copyfiles
	(help @copyfiles-help)
	(source ("%s.icon" @app-name))
	(dest @default-dest)
	(newname ("%s.info" @app-name))
)

(copyfiles
	(help @copyfiles-help)
	(source "Moktar.slave" )
	(dest @default-dest)
        (newname ("%s.slave" @app-name))
)


	(askdisk
	  (prompt ("\n\n\n\n\n\nPlease insert %s disk in any drive" @app-name))
	  (dest	  #currentdisk)
	  (help	  ("Insert disk in any floppy drive or you'll wait for a while!") )
	)

	(copyfiles (source ("%s:" #currentdisk))
           (dest #datadir)
	   (all)
	)


	(if

		(= 0 (run ("c:xfddecrunch >NIL: %s" (tackon #datadir "main")  )) )
		("")
		(abort "XFDDecrunch not found in C:\n\nInstall XFDDecrunch first\n\n(util/pack/XFDDecrunch.lha on aminet)")
	)

;; end copy floppies
(set #diskno (+ #diskno 1))
